model {

  customer = actor 'Cloud System Customer' {
    description '
      The regular customer of the system
    '
  }

  cloud = system 'Cloud System' {
    description '
      Our SaaS platfrom that allows
      customers to interact with
      the latest technologies
    '

    ui = container 'Frontends' {
      description '
        All the frontend applications
        of Cloud System
      '
      metadata {
        version '2.1.1'
      }
    }

    legacy = container 'Cloud Legacy' {
      description '
        The legacy version of our SaaS
        MVP as was presented to the first customers
      '
      link ./.github/workflows/update-diagrams.yml#L19-L25 'L19-L25'
    }

    next = container 'Cloud Next' {
      description 'Cloud Next is the next version of our cloud systems'
    }

    supportUser = actor 'Support User' {
      description '
        A emploere from the support team
        Has limited access to the system
      '

      -> customer 'helps with questions' {
        metadata {
          rps '1000'
        }
      }
    }
  }
  customer .uses cloud 'uses and pays'

}

views {

  view index {
    title "Landscape"
    include
      customer, // include first
      *
  }

  /**
   * @likec4-generated(v1)
   * iKRoYXNo2ShhZDQxMWYyOWNlMWMxYjVlNTllZDYzYzQ4NGIxZjFkOWIyN2Q4OGIwqmF1dG9MYXlvdXSiVEKheAChefOld2lkdGjNAo2maGVpZ2h0zQMzpW5vZGVzg7FjbG91ZC5zdXBwb3J0VXNlcoKhYpTMqvPNAUDMtKFjwqhjdXN0b21lcoKhYpQAzQE5zQFAzLSh
   * Y8KoY2xvdWQudWmCoWKUzLTNAnLNAUDMtKFjwqVlZGdlc4O6Y2xvdWQuc3VwcG9ydFVzZXI6Y2xvdWQudWmDomNwkoKheM0BlKF5zNCCoXjNAaKhec0BtqFshKF4zQGloXnNAY+ld2lkdGjM6KZoZWlnaHQioXCXks0BiMy0ks0BkczGks0BmMzZks0BnMzrks0Bu80B
   * bZLNAZjNAgaSzQF5zQJoumNsb3VkLnN1cHBvcnRVc2VyOmN1c3RvbWVyg6JjcJGCoXjM/aF5zPKhbISheMz8oXnM9KV3aWR0aMyCpmhlaWdodBKhcJSSzQEhzLSSzQEKzNuSzPDNAQiSzNnNATCxY3VzdG9tZXI6Y2xvdWQudWmDoWyEoXjM96F5zQIqpXdpZHRoGaZo
   * ZWlnaHQSomRw2UZlLDI4OC42MSw2MjUuODQgMjExLjM2LDQ5Mi40NSAyMzMuODcsNTMxLjMxIDI2MC4zNiw1NzcuMDYgMjgzLjQ0LDYxNi45oXCUkszTzQHskszqzQITks0BBM0CQZLNARvNAmk=
   */
  view customer of customer {
    include
      *,
      customer -> cloud.ui with {
        color red
      },
      supportUser

    style supportUser {
      color #f0f
    }
  }

  dynamic view dynamic-view-1 {
    title 'Dynamic View Example'

    link https://docs.likec4.dev/dsl/dynamic-views/ 'Docs'

    customer -> ui.dashboard 'opens'
    ui.dashboard -> cloud.graphql 'requests'
    ui.dashboard <- cloud.graphql 'returns'

    ui.mobile -> cloud.graphql 'requests'
    ui.mobile <- cloud.graphql

    include cloud

    autoLayout TopBottom
    style * {
      color secondary
    }
    style cloud {
      opacity 40%
      color muted
    }
  }

}
